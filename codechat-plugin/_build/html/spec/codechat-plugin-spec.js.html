
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>&lt;no title&gt; &#8212; Project Name version 0.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/CodeChat.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     'version 0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="nav-item nav-item-0"><a href="../index.html">Project Name version 0.0 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="code highlight-python"><div class="highlight"><pre><span></span><span class="s1">&#39;use babel&#39;</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">CodechatPlugin</span> <span class="nn">from</span> <span class="s1">&#39;../lib/codechat-plugin&#39;</span><span class="p">;</span>
 
</pre></div>
</div>
<p>Use the command <code class="xref any docutils literal"><span class="pre">window:run-package-specs</span></code> (cmd-alt-ctrl-p) to run specs.</p>
<p>To run a specific <code class="xref any docutils literal"><span class="pre">it</span></code> or <code class="xref any docutils literal"><span class="pre">describe</span></code> block add an <code class="xref any docutils literal"><span class="pre">f</span></code> to the front (e.g. <code class="xref any docutils literal"><span class="pre">fit</span></code>
or <code class="xref any docutils literal"><span class="pre">fdescribe</span></code>). Remove the <code class="xref any docutils literal"><span class="pre">f</span></code> to unfocus the block.</p>
<div class="code highlight-python"><div class="highlight"><pre><span></span> 
<span class="n">describe</span><span class="p">(</span><span class="s1">&#39;CodechatPlugin&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="n">let</span> <span class="n">workspaceElement</span><span class="p">,</span> <span class="n">activationPromise</span><span class="p">;</span>

  <span class="n">beforeEach</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="n">workspaceElement</span> <span class="o">=</span> <span class="n">atom</span><span class="o">.</span><span class="n">views</span><span class="o">.</span><span class="n">getView</span><span class="p">(</span><span class="n">atom</span><span class="o">.</span><span class="n">workspace</span><span class="p">);</span>
    <span class="n">activationPromise</span> <span class="o">=</span> <span class="n">atom</span><span class="o">.</span><span class="n">packages</span><span class="o">.</span><span class="n">activatePackage</span><span class="p">(</span><span class="s1">&#39;codechat-plugin&#39;</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="n">describe</span><span class="p">(</span><span class="s1">&#39;when the codechat-plugin:toggle event is triggered&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="n">it</span><span class="p">(</span><span class="s1">&#39;hides and shows the modal panel&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</pre></div>
</div>
<div style="margin-left:3.0em;"><p>Before the activation event the view is not on the DOM, and no panel
has been created</p>
</div><div class="code highlight-python"><div class="highlight"><pre><span></span>      <span class="n">expect</span><span class="p">(</span><span class="n">workspaceElement</span><span class="o">.</span><span class="n">querySelector</span><span class="p">(</span><span class="s1">&#39;.codechat-plugin&#39;</span><span class="p">))</span><span class="o">.</span><span class="ow">not</span><span class="o">.</span><span class="n">toExist</span><span class="p">();</span>
 
</pre></div>
</div>
<div style="margin-left:3.0em;"><p>This is an activation event, triggering it will cause the package to be
activated.</p>
</div><div class="code highlight-python"><div class="highlight"><pre><span></span>      <span class="n">atom</span><span class="o">.</span><span class="n">commands</span><span class="o">.</span><span class="n">dispatch</span><span class="p">(</span><span class="n">workspaceElement</span><span class="p">,</span> <span class="s1">&#39;codechat-plugin:toggle&#39;</span><span class="p">);</span>

      <span class="n">waitsForPromise</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">activationPromise</span><span class="p">;</span>
      <span class="p">});</span>

      <span class="n">runs</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="n">expect</span><span class="p">(</span><span class="n">workspaceElement</span><span class="o">.</span><span class="n">querySelector</span><span class="p">(</span><span class="s1">&#39;.codechat-plugin&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">toExist</span><span class="p">();</span>

        <span class="n">let</span> <span class="n">codechatPluginElement</span> <span class="o">=</span> <span class="n">workspaceElement</span><span class="o">.</span><span class="n">querySelector</span><span class="p">(</span><span class="s1">&#39;.codechat-plugin&#39;</span><span class="p">);</span>
        <span class="n">expect</span><span class="p">(</span><span class="n">codechatPluginElement</span><span class="p">)</span><span class="o">.</span><span class="n">toExist</span><span class="p">();</span>

        <span class="n">let</span> <span class="n">codechatPluginPanel</span> <span class="o">=</span> <span class="n">atom</span><span class="o">.</span><span class="n">workspace</span><span class="o">.</span><span class="n">panelForItem</span><span class="p">(</span><span class="n">codechatPluginElement</span><span class="p">);</span>
        <span class="n">expect</span><span class="p">(</span><span class="n">codechatPluginPanel</span><span class="o">.</span><span class="n">isVisible</span><span class="p">())</span><span class="o">.</span><span class="n">toBe</span><span class="p">(</span><span class="n">true</span><span class="p">);</span>
        <span class="n">atom</span><span class="o">.</span><span class="n">commands</span><span class="o">.</span><span class="n">dispatch</span><span class="p">(</span><span class="n">workspaceElement</span><span class="p">,</span> <span class="s1">&#39;codechat-plugin:toggle&#39;</span><span class="p">);</span>
        <span class="n">expect</span><span class="p">(</span><span class="n">codechatPluginPanel</span><span class="o">.</span><span class="n">isVisible</span><span class="p">())</span><span class="o">.</span><span class="n">toBe</span><span class="p">(</span><span class="n">false</span><span class="p">);</span>
      <span class="p">});</span>
    <span class="p">});</span>

    <span class="n">it</span><span class="p">(</span><span class="s1">&#39;hides and shows the view&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</pre></div>
</div>
<div style="margin-left:3.0em;"><p>This test shows you an integration test testing at the view level.</p>
</div><div class="code highlight-python"><div class="highlight"><pre><span></span> 
</pre></div>
</div>
<div style="margin-left:3.0em;"><p>Attaching the workspaceElement to the DOM is required to allow the
<code class="xref any docutils literal"><span class="pre">toBeVisible()</span></code> matchers to work. Anything testing visibility or focus
requires that the workspaceElement is on the DOM. Tests that attach the
workspaceElement to the DOM are generally slower than those off DOM.</p>
</div><div class="code highlight-python"><div class="highlight"><pre><span></span>      <span class="n">jasmine</span><span class="o">.</span><span class="n">attachToDOM</span><span class="p">(</span><span class="n">workspaceElement</span><span class="p">);</span>

      <span class="n">expect</span><span class="p">(</span><span class="n">workspaceElement</span><span class="o">.</span><span class="n">querySelector</span><span class="p">(</span><span class="s1">&#39;.codechat-plugin&#39;</span><span class="p">))</span><span class="o">.</span><span class="ow">not</span><span class="o">.</span><span class="n">toExist</span><span class="p">();</span>
 
</pre></div>
</div>
<div style="margin-left:3.0em;"><p>This is an activation event, triggering it causes the package to be
activated.</p>
</div><div class="code highlight-python"><div class="highlight"><pre><span></span>      <span class="n">atom</span><span class="o">.</span><span class="n">commands</span><span class="o">.</span><span class="n">dispatch</span><span class="p">(</span><span class="n">workspaceElement</span><span class="p">,</span> <span class="s1">&#39;codechat-plugin:toggle&#39;</span><span class="p">);</span>

      <span class="n">waitsForPromise</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">activationPromise</span><span class="p">;</span>
      <span class="p">});</span>

      <span class="n">runs</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</pre></div>
</div>
<div style="margin-left:4.0em;"><p>Now we can test for view visibility</p>
</div><div class="code highlight-python"><div class="highlight"><pre><span></span>        <span class="n">let</span> <span class="n">codechatPluginElement</span> <span class="o">=</span> <span class="n">workspaceElement</span><span class="o">.</span><span class="n">querySelector</span><span class="p">(</span><span class="s1">&#39;.codechat-plugin&#39;</span><span class="p">);</span>
        <span class="n">expect</span><span class="p">(</span><span class="n">codechatPluginElement</span><span class="p">)</span><span class="o">.</span><span class="n">toBeVisible</span><span class="p">();</span>
        <span class="n">atom</span><span class="o">.</span><span class="n">commands</span><span class="o">.</span><span class="n">dispatch</span><span class="p">(</span><span class="n">workspaceElement</span><span class="p">,</span> <span class="s1">&#39;codechat-plugin:toggle&#39;</span><span class="p">);</span>
        <span class="n">expect</span><span class="p">(</span><span class="n">codechatPluginElement</span><span class="p">)</span><span class="o">.</span><span class="ow">not</span><span class="o">.</span><span class="n">toBeVisible</span><span class="p">();</span>
      <span class="p">});</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre></div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/spec/codechat-plugin-spec.js.js.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="nav-item nav-item-0"><a href="../index.html">Project Name version 0.0 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2016, Author.
      Last updated on Aug, 09, 2017.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.1.
    </div>
  </body>
</html>